{% extends 'base.html' %}

{% block content %}
<style>
    @keyframes spin {
        to { transform: rotate(360deg);}
    }
    .spinner {
        border: 8px solid rgb(180, 180, 180);
        border-left-color: #fff;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        float: left;
        animation: spin 1.2s linear infinite;
    }
</style>
<section  id="main">
    <div class="container">
        <form action="{% url 'accounts:save_salesman' %}" method="post">
            <div class="form-group">
                <label for="name">Usu√°rio:</label>
                <input class="form-control" type="text" id="name" name="name">
            </div>
            <div class="form-group">
                <label for="phone">Telefone:</label>
                <input class="form-control" type="text" id="phone" name="phone">
            </div>
            <div class="form-group">
                <label for=individual_registration"">CPF:</label>
                <input class="form-control" type="text" id="individual_registration" name="individual_registration">
            </div>
            <div class="btn-save">
                <input type="submit" class="form-control" value="Salvar" id="form_salesman_post">
            </div>
        </form>
    </div>
</section>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<!--<script>
    $('#form_salesman_post').on('click', function(e){
        e.preventDefault();
        var salesman_data = {
            'name': $('#name').val(),
            'phone': $('#phone').val(),
            'individual_registration': $('#individual_registration').val()
        }
        $.ajax({
            url: "{% url 'accounts:save_salesman' %}",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(salesman_data),
            success: function(data){
                console.log(data);
                if (data.status == 202){
                    $('.btn-save').html('Cadastrando... <br/><div class="spinner"></div>');
                    setTimeout(function(){
                        window.location.href = data.url;
                    }, 1000);
                }
                else {
                    if (data.status == 502){
                        alert(data.message);
                    }
                }
            },
            error: function(data){
                console.log(data);
            }
        });
    });

</script>-->
{% endblock %}